[{"path":"https://clatrellu.github.io/Ecotaxa_R/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 Ecotaxa_R authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/articles/vignette.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Analyse Planktoscope data","text":"example usage package small dataset, global.tsv. tsv file contains 8 samples, 3 different nets.","code":""},{"path":[]},{"path":"https://clatrellu.github.io/Ecotaxa_R/articles/vignette.html","id":"import-data","dir":"Articles","previous_headings":"Analyses","what":"Import data","title":"Analyse Planktoscope data","text":"first step import tsv file R. , use function import.data(). decide omit categories \"-ling\", \"duplicate\" \"multiple\" consider relevant analysis. aggregate data per category function get.counts..vol(). basically consists counting objects summing volumes. also extract information related samples function get.info() can now start analyse data.","code":"toy_dataset <- system.file(\"extdata\", \"global.tsv.gz\", package = \"planktoscopeR\")  data <- import.data(toy_dataset,                     unwanted = c(\"not-living\",\"duplicate\",\"multiple\")) data_distrib <- get.counts.and.vol(data) context <- get.info(data,type=\"sample\")"},{"path":"https://clatrellu.github.io/Ecotaxa_R/articles/vignette.html","id":"taxonomic-composition","dir":"Articles","previous_headings":"Analyses","what":"Taxonomic composition","title":"Analyse Planktoscope data","text":"quick way overview taxonomic composition sample produce barcharts coloured taxonomic groups.  plot doesn’t look good. Let’s tune bit! use function plot_categ() limit number categories (colours) 9… add change colour palette scale_fill_brewer(), change theme theme_bw() rotate x axis labels  observe big differences term total biovolume, hard see differences composition. Using option position=\"fill\" geom_col bars height facilitating comparison.","code":"ggplot(data_distrib,aes(x=sample_id,y=biovolume))+   geom_col(aes(fill=category)) plot_categ(data_distrib,\"category\",\"biovolume\") taxoplot_biov <- ggplot(data_distrib,aes(x=sample_id,y=biovolume))+   geom_col(aes(fill=category_plot),col=\"black\")+   scale_fill_brewer(palette = \"Set1\")+   scale_x_discrete(guide = guide_axis(angle = 45))+   theme_bw()  taxoplot_biov taxoplot_biov_total <- ggplot(data_distrib,aes(x=sample_id,y=biovolume))+   geom_col(aes(fill=category_plot),col=\"black\",position=\"fill\")+   scale_fill_brewer(palette = \"Set1\")+   scale_x_discrete(guide = guide_axis(angle = 45))+   theme_bw()  taxoplot_biov_total"},{"path":"https://clatrellu.github.io/Ecotaxa_R/articles/vignette.html","id":"beta_diversity","dir":"Articles","previous_headings":"Analyses","what":"Beta_diversity","title":"Analyse Planktoscope data","text":"section use functions library vegan contains functions need community ecology analysis. Beta diversity ratio local diversity (alpha diversity) regional diversity (gamma diversity). Beta diversity often estimated measuring species composition rate variation. words, much species composition two samples varies. use Bray-Curtis dissimilarity, one popular dissimilarity measures ecology, compare samples. First transform count table format can directly use functions library vegan. compute Bray-Curtis dissimilarities biovolumes. able visualize dissimilarities (beta diversity) two dimension perform Principal Coordinates Analysis (PCoA). extract results link sample description… visualize results using ggplot2. plot top PCoA taxonomic composition barcharts (biovolumes).  observe beta diversity due differences total biovolumes. frequent problems calculation filtered volumes, worth analysing standardized biovolumes. , standardized data function vegan::decostand() , analysis .  Now see difference mostly explained sampling gear used.","code":"biovolume_df <- get.df.vegan(data_distrib,\"biovolume\") d.bray <- vegdist(biovolume_df) pcoa <- cmdscale(d.bray,k=2,eig=T) pcoa.plot <- data.table(id=row.names(biovolume_df),                         PCo1=pcoa$points[,1],                         PCo2=pcoa$points[,2]) pcoa.plot <- merge(pcoa.plot,context[,list(id,sampling_gear)],by=\"id\") pcoa_biov <- ggplot(pcoa.plot,aes(x=PCo1,y=PCo2,color=sampling_gear)) +   geom_point(size=3) +   geom_text_repel(aes(label=id))+     labs(title=\"PCoA on biovolumes\",          x = paste(\"PCo1 \",round(100*pcoa$eig[1]/sum(pcoa$eig)),\" %\"),          y = paste(\"PCo2 \",round(100*pcoa$eig[2]/sum(pcoa$eig)),\" %\"))  +     theme(plot.title.position=\"panel\")+   coord_fixed()  taxoplot_biov/pcoa_biov biovolume_df_total <- decostand(biovolume_df,method = \"total\") d.bray<-vegdist(biovolume_df_total) pcoa<-cmdscale(d.bray,k=2,eig=T) pcoa.plot<-data.table(id=row.names(biovolume_df_total),PCo1=pcoa$points[,1],PCo2=pcoa$points[,2]) pcoa.plot <- merge(pcoa.plot,context[,list(id,sampling_gear)],by=\"id\")  pcoa_biov_total <- ggplot(pcoa.plot,aes(x=PCo1,y=PCo2,color=sampling_gear)) +   geom_point(size=3) +   geom_text_repel(aes(label=id))+     labs(title=\"PCoA on biovolumes\",          x = paste(\"PCo1 \",round(100*pcoa$eig[1]/sum(pcoa$eig)),\" %\"), # percentage explained by the first component          y = paste(\"PCo2 \",round(100*pcoa$eig[2]/sum(pcoa$eig)),\" %\"))  +     theme(plot.title.position=\"panel\")  taxoplot_biov_total/pcoa_biov_total"},{"path":"https://clatrellu.github.io/Ecotaxa_R/articles/vignette.html","id":"nbss-plots","dir":"Articles","previous_headings":"Analyses","what":"NBSS plots","title":"Analyse Planktoscope data","text":"can also show NBSS plots. correspond normalized biomass size spectra.","code":"#  sample_selection <- context[sampling_gear==\"net_hsn\",id] data_selection <- data[sample_id%in%sample_selection]  res <- lapply(split(data_selection,by=\"sample_id\"),function(X){   NBSS.plot(X) }) wrap_plots(res[1:8],nrow = 4,ncol=2)"},{"path":"https://clatrellu.github.io/Ecotaxa_R/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Clara Trellu. Author, maintainer. Nicolas Henry. Author.","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Trellu C, Henry N (2022). planktoscopeR: set functions analyse planktosocope data. R package version 0.0.0.9000, https://clatrellu.github.io/Ecotaxa_R/.","code":"@Manual{,   title = {planktoscopeR: A set of functions to analyse planktosocope data},   author = {Clara Trellu and Nicolas Henry},   year = {2022},   note = {R package version 0.0.0.9000},   url = {https://clatrellu.github.io/Ecotaxa_R/}, }"},{"path":"https://clatrellu.github.io/Ecotaxa_R/index.html","id":"introduction","dir":"","previous_headings":"","what":"Introduction","title":"A set of functions to analyse planktosocope data ","text":"set function allow process analyse data one several .tsv files ecotaxa. /.tsv file(s) export project containing images taken using Planktoscope. produce first basic analysis diversity samples well comparison samples.","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"A set of functions to analyse planktosocope data ","text":"can install planktoscopeR github :","code":"install.packages(\"devtools\") devtools::install_github(\"nhenry50/planktoscopeR\")"},{"path":"https://clatrellu.github.io/Ecotaxa_R/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"A set of functions to analyse planktosocope data ","text":"example use functions, look vignette(\"basic_analysis\") Feel free add tools might interest interpret classified Planktoscope data.","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/index.html","id":"definitions","dir":"","previous_headings":"","what":"Definitions","title":"A set of functions to analyse planktosocope data ","text":"Biovolume : volume cell mm^3 per cubic metre water. summed biovolume allows represent proportion group cells volume water. NBSS : Normalized Biovolume Size Spectra","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/NBSS.html","id":null,"dir":"Reference","previous_headings":"","what":"NBSS : Normalized Biovolume Size Spectra calculation for a given sample,\ncalculate several NBSS spectra to compare samples — NBSS","title":"NBSS : Normalized Biovolume Size Spectra calculation for a given sample,\ncalculate several NBSS spectra to compare samples — NBSS","text":"NBSS : Normalized Biovolume Size Spectra calculation given sample, calculate several NBSS spectra compare samples","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/NBSS.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"NBSS : Normalized Biovolume Size Spectra calculation for a given sample,\ncalculate several NBSS spectra to compare samples — NBSS","text":"","code":"NBSS(planktotable, N = TRUE)"},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/NBSS.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"NBSS : Normalized Biovolume Size Spectra calculation for a given sample,\ncalculate several NBSS spectra to compare samples — NBSS","text":"objects data table containing objects rows (necessarily sample) details objects columns. samples data table containing samples rows details latter columns. sample string containing name sample calculate NBSS","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/NBSS.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"NBSS : Normalized Biovolume Size Spectra calculation for a given sample,\ncalculate several NBSS spectra to compare samples — NBSS","text":"data table containing two columns, first size spectra, given mm^3, second NBSS interval size.","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/NBSS.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"NBSS : Normalized Biovolume Size Spectra calculation for a given sample,\ncalculate several NBSS spectra to compare samples — NBSS","text":"variables used called biovolumes simplify actually use volumes. Since biovolumes volumes normalized total volume objects sample, result , except size spectra given mm^3 instead mm^3/m^3","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/NBSS.plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Plotting of the NBSS - Normalized Biovolume Size Spectra - of a given sample — NBSS.plot","title":"Plotting of the NBSS - Normalized Biovolume Size Spectra - of a given sample — NBSS.plot","text":"Plotting NBSS - Normalized Biovolume Size Spectra - given sample","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/NBSS.plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plotting of the NBSS - Normalized Biovolume Size Spectra - of a given sample — NBSS.plot","text":"","code":"NBSS.plot(planktotable, ESD = TRUE)"},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/NBSS.plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plotting of the NBSS - Normalized Biovolume Size Spectra - of a given sample — NBSS.plot","text":"ESD ESD true, default, x axis expressed ESD (Eqivalent spherical diameter given volume) µm. Otherwise, volumes x-axis mm^3 objects data table containing objects rows details objects columns. argument passed NBSS function samples data table containing samples rows details latter columns. sample_name string containing name sample extract objects NBSS analysis.","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/NBSS.plot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plotting of the NBSS - Normalized Biovolume Size Spectra - of a given sample — NBSS.plot","text":"object type ggplot can plotted.","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/NBSS.plot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plotting of the NBSS - Normalized Biovolume Size Spectra - of a given sample — NBSS.plot","text":"","code":"p <- NBSS.plot(objects=objects,samples=samples,sample_name=sample_id,ESD=TRUE) #> Error in NBSS.plot(objects = objects, samples = samples, sample_name = sample_id,     ESD = TRUE): unused arguments (objects = objects, samples = samples, sample_name = sample_id) p  #> Error in eval(expr, envir, enclos): object 'p' not found"},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/get.counts.and.vol.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract total counts and volumes — get.counts.and.vol","title":"Extract total counts and volumes — get.counts.and.vol","text":"function counts many objects observed per category (object_annotation_category) sample. also sums volumes biovolumes category.","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/get.counts.and.vol.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract total counts and volumes — get.counts.and.vol","text":"","code":"get.counts.and.vol(planktotable)"},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/get.counts.and.vol.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract total counts and volumes — get.counts.and.vol","text":"planktotable data table obtained using function import.data()","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/get.counts.and.vol.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract total counts and volumes — get.counts.and.vol","text":"data table 5 columns. sample id, object category, counts, volume biovolumes.","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/get.df.vegan.html","id":null,"dir":"Reference","previous_headings":"","what":"Get a community data matrix — get.df.vegan","title":"Get a community data matrix — get.df.vegan","text":"function convert long format table community data matrix can directly used functions library vegan","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/get.df.vegan.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get a community data matrix — get.df.vegan","text":"","code":"get.df.vegan(x, value.var = \"count\")"},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/get.df.vegan.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get a community data matrix — get.df.vegan","text":"x long format table obtained using function get.counts..vol() value.var value column used. Possible options \"count\", \"volume\" \"biovolume\"","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/get.df.vegan.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get a community data matrix — get.df.vegan","text":"community data matrix (data frame) categories columns samples rows.","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/get.info.html","id":null,"dir":"Reference","previous_headings":"","what":"Get description of samples or objects — get.info","title":"Get description of samples or objects — get.info","text":"function extract fields related objects samples","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/get.info.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get description of samples or objects — get.info","text":"","code":"get.info(planktotable, type = \"sample\")"},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/get.info.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get description of samples or objects — get.info","text":"planktotable data table obtained using function import.data() type type fields extract. Possible options \"sample\" \"object\"","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/get.info.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get description of samples or objects — get.info","text":"data tale information related samples objects","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/import.data.html","id":null,"dir":"Reference","previous_headings":"","what":"Import data from tsv file downloaded from Ecotaxa — import.data","title":"Import data from tsv file downloaded from Ecotaxa — import.data","text":"function imports one several Ecotaxa tsv files one data.table object computed volumes.","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/import.data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Import data from tsv file downloaded from Ecotaxa — import.data","text":"","code":"import.data(   files = NULL,   unwanted = NA,   taxo_column = \"object_annotation_hierarchy\" )"},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/import.data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Import data from tsv file downloaded from Ecotaxa — import.data","text":"files one several tsv file names Planktoscope aquisition classified Ecotaxa. multiple files inserted, make sure grouped list. unwanted vector list strings containing names categories wish discard. function search keywords field specified argument taxo_column, therefore can target large categories include several species. example category contains categories ,b c, want omit ,b c can simply put argument. default, function keep categories.","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/import.data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Import data from tsv file downloaded from Ecotaxa — import.data","text":"data table fields original data.","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/import.data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Import data from tsv file downloaded from Ecotaxa — import.data","text":"Biovolume volume information added. Date time removed sample ids.","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/plot_categ.html","id":null,"dir":"Reference","previous_headings":"","what":"Taxa selection for plots — plot_categ","title":"Taxa selection for plots — plot_categ","text":"function add extra column containing abundant categories","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/plot_categ.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Taxa selection for plots — plot_categ","text":"","code":"plot_categ(x, categ, quantity, ngroups = 9)"},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/plot_categ.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Taxa selection for plots — plot_categ","text":"x long format table obtained using function get.counts..vol() categ column input table containing category information quantity column input table quantifuy category ngroups maximum number categories keep","code":""},{"path":"https://clatrellu.github.io/Ecotaxa_R/reference/plot_categ.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Taxa selection for plots — plot_categ","text":"Add extra column input table. column contains abundant categories, number categories defined ngroups. categories names \"others\"","code":""}]
